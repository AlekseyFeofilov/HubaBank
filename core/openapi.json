{"openapi":"3.0.1","info":{"title":"Core Service"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"paths":{"/users/{userId}/bills":{"get":{"tags":["bill-controller"],"summary":"Посмотреть все счета пользователя","description":"Описание прав:\n* BILL_READ - доступ к своим счетам\n* BILL_READ_OTHERS - доступ к счетам любого клиента\n","operationId":"getUserBills","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ClientBillDto"}}}}}},"security":[{"Bearer Authentication":[]}]},"post":{"tags":["bill-controller"],"summary":"Создать счет для пользователя","description":"Описание прав:\n* BILL_WRITE - доступ к открытию своего счета\n* BILL_WRITE_OTHERS - доступ к открытию счета у любого клиента\n","operationId":"createBill","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK"}},"security":[{"Bearer Authentication":[]}]}},"/users/{userId}/bills/{billId}/transactions":{"get":{"tags":["transaction-controller"],"summary":"Посмотреть историю транзакций по счету у пользователя","description":"Описание прав:\n* TRANSACTION_READ - доступ к просмотру истории транзакций своего счета\n* TRANSACTION_READ_OTHERS - доступ к просмотру истории транзакций любого счета\n","operationId":"getTransactions","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"billId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionDto"}}}}}},"security":[{"Bearer Authentication":[]}]},"post":{"tags":["transaction-controller"],"summary":"Выполнить транзакцию по счету у пользователя","description":"Описание прав:\n* TRANSACTION_WRITE - доступ к выполнению транзакции на своем счете\n* TRANSACTION_WRITE_OTHERS - доступ к выполнению транзакции на любом счете\n","operationId":"createTransaction","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"billId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionCreationDto"}}},"required":true},"responses":{"200":{"description":"OK"}},"security":[{"Bearer Authentication":[]}]}},"/users/{userId}/bills/{billId}":{"get":{"tags":["bill-controller"],"summary":"Посмотреть информацию о счете пользователя","description":"Описание прав:\n* BILL_READ - доступ к информации о своем счете\n* BILL_READ_OTHERS - доступ к информации о любом счете\n","operationId":"getBill","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"billId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BillDto"}}}}},"security":[{"Bearer Authentication":[]}]},"delete":{"tags":["bill-controller"],"summary":"Закрыть счет у пользователя","description":"Описание прав:\n* BILL_WRITE - доступ к закрытию своего счета\n* BILL_WRITE_OTHERS - доступ к закрытию любого счета\n","operationId":"closeBill","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"billId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK"}},"security":[{"Bearer Authentication":[]}]}},"/bills":{"get":{"tags":["bill-controller"],"summary":"Посмотреть все счета","description":"Описание прав:\n* BILL_READ_OTHERS - доступ к любым счетам\n","operationId":"getBills","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BillDto"}}}}}},"security":[{"Bearer Authentication":[]}]}}},"components":{"schemas":{"TransactionCreationDto":{"type":"object","properties":{"balanceChange":{"type":"number"},"reason":{"type":"string","enum":["TERMINAL","LOAN"]}}},"ClientBillDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"balance":{"type":"number"},"closed":{"type":"boolean"}}},"BillDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"userId":{"type":"string","format":"uuid"},"balance":{"type":"number"},"closed":{"type":"boolean"}}},"TransactionDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"billId":{"type":"string","format":"uuid"},"balanceChange":{"type":"number"},"reason":{"type":"string","enum":["TERMINAL","LOAN"]}}}},"securitySchemes":{"Bearer Authentication":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}